<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="å†…æ ¸ä¸€æ—¦å‘ç°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªI/Oæ¡ä»¶å°±ç»ªï¼Œå®ƒå°±é€šçŸ¥è¿›ç¨‹ã€‚è¿™ç§èƒ½åŠ›ç§°ä¸ºI/Oå¤ç”¨ã€‚">
<meta name="keywords" content="unix,ç½‘ç»œç¼–ç¨‹,IOå¤ç”¨,select,poll,epoll">
<meta property="og:type" content="article">
<meta property="og:title" content="IOå¤ç”¨">
<meta property="og:url" content="http://yoursite.com/2019/10/11/IOå¤ç”¨/index.html">
<meta property="og:site_name" content="çªè¾¹è‰">
<meta property="og:description" content="å†…æ ¸ä¸€æ—¦å‘ç°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªI/Oæ¡ä»¶å°±ç»ªï¼Œå®ƒå°±é€šçŸ¥è¿›ç¨‹ã€‚è¿™ç§èƒ½åŠ›ç§°ä¸ºI/Oå¤ç”¨ã€‚">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/imgs/1570773791564.png">
<meta property="og:updated_time" content="2019-10-12T02:28:52.418Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="IOå¤ç”¨">
<meta name="twitter:description" content="å†…æ ¸ä¸€æ—¦å‘ç°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªI/Oæ¡ä»¶å°±ç»ªï¼Œå®ƒå°±é€šçŸ¥è¿›ç¨‹ã€‚è¿™ç§èƒ½åŠ›ç§°ä¸ºI/Oå¤ç”¨ã€‚">
<meta name="twitter:image" content="http://yoursite.com/imgs/1570773791564.png">
  <link rel="canonical" href="http://yoursite.com/2019/10/11/IOå¤ç”¨/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>IOå¤ç”¨ | çªè¾¹è‰</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?859cee8f5da7a00121e9a0bef911e58c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">çªè¾¹è‰</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>å…³äº</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-commonweal">
      
    

    <a href="/404.html" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>å…¬ç›Š 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>æœç´¢</a>
      </li>
    
  </ul>

    

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/11/IOå¤ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ChocoCLv">
      <meta itemprop="description" content="å…”å­ğŸ‡å’Œçªè¾¹è‰ğŸŒ±">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="çªè¾¹è‰">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">IOå¤ç”¨

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-11 13:37:10" itemprop="dateCreated datePublished" datetime="2019-10-11T13:37:10+08:00">2019-10-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-12 10:28:52" itemprop="dateModified" datetime="2019-10-12T10:28:52+08:00">2019-10-12</time>
              </span>
            
          

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2019/10/11/IOå¤ç”¨/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2019/10/11/IOå¤ç”¨/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>å†…æ ¸ä¸€æ—¦å‘ç°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªI/Oæ¡ä»¶å°±ç»ªï¼Œå®ƒå°±é€šçŸ¥è¿›ç¨‹ã€‚è¿™ç§èƒ½åŠ›ç§°ä¸ºI/Oå¤ç”¨ã€‚</p>
<a id="more"></a>
<h1 id="IOæ¨¡å‹"><a href="#IOæ¨¡å‹" class="headerlink" title="IOæ¨¡å‹"></a>IOæ¨¡å‹</h1><p>Unixä¸‹5ç§IOæ¨¡å‹ï¼š</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>ä»‹ç»</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>é˜»å¡å¼I/O</td>
<td></td>
<td></td>
</tr>
<tr>
<td>éé˜»å¡å¼I/O</td>
<td>éé˜»å¡+è½®è¯¢</td>
<td>è€—è´¹å¤§é‡CPUæ—¶é—´</td>
</tr>
<tr>
<td>I/Oå¤ç”¨ï¼ˆselectå’Œpollï¼‰</td>
<td>select/poll+I/O</td>
<td>å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªæè¿°ç¬¦</td>
</tr>
<tr>
<td>ä¿¡å·é©±åŠ¨å¼I/O</td>
<td>å†…æ ¸åœ¨å°±ç»ªæ—¶å‘é€SIGIOä¿¡å·</td>
<td>å°±ç»­å‰è¿›ç¨‹ä¸è¢«é˜»å¡ï¼›é€šçŸ¥ä½•æ—¶å¯åŠ¨ä¸€ä¸ªI/Oæ“ä½œ</td>
</tr>
<tr>
<td>å¼‚æ­¥I/O</td>
<td>å‘ŠçŸ¥å†…æ ¸å¯åŠ¨æŸä¸ªæ“ä½œï¼Œåœ¨æ•´ä¸ªæ“ä½œï¼ˆåŒ…æ‹¬å°†æ•°æ®ä»å†…æ ¸å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ï¼‰å®Œæˆåé€šçŸ¥</td>
<td>é€šçŸ¥ä½•æ—¶I/Oæ“ä½œå®Œæˆ</td>
</tr>
</tbody>
</table>
</div>
<p>å‰å››ç§æ¨¡å‹å‡ä¸ºåŒæ­¥I/Oã€‚</p>
<p>åŒæ­¥I/Oï¼šå¯¼è‡´è¯·æ±‚è¿›ç¨‹é˜»å¡ï¼Œç›´åˆ°I/Oæ“ä½œå®Œæˆ</p>
<p>å¼‚æ­¥I/Oï¼šä¸å¯¼è‡´è¯·æ±‚è¿›ç¨‹é˜»å¡ã€‚</p>
<p><img src="/imgs/1570773791564.png" alt="1570773791564"></p>
<h1 id="selectå‡½æ•°"><a href="#selectå‡½æ•°" class="headerlink" title="selectå‡½æ•°"></a>selectå‡½æ•°</h1><p>è¯¥å‡½æ•°å…è®¸è¿›ç¨‹æŒ‡ç¤ºå†…æ ¸ç­‰å¾…å¤šä¸ªäº‹ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘ç”Ÿï¼Œå¹¶åªåœ¨æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶å‘ç”Ÿæˆ–ç»å†ä¸€æ®µæŒ‡å®šçš„æ—¶é—´åæ‰å”¤é†’å®ƒã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/select.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">select</span><span class="params">(<span class="keyword">int</span> maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset, <span class="keyword">const</span> struct timeval *timeout)</span></span>;</span><br><span class="line"><span class="comment">//è‹¥æœ‰å°±ç»ªæè¿°ç¬¦åˆ™è¿”å›æ•°ç›®ï¼Œè¶…æ—¶è¿”å›0ï¼Œå‡ºé”™è¿”å›-1</span></span><br></pre></td></tr></table></figure>
<p>å½“ä¸‰ä¸ªsetå‡ä¸ºç©ºæŒ‡é’ˆæ—¶ï¼Œå¯ä»¥ç”¨ä½œç²¾åº¦ä¸ºusçš„å®šæ—¶å™¨</p>
<h1 id="pollå‡½æ•°"><a href="#pollå‡½æ•°" class="headerlink" title="pollå‡½æ•°"></a>pollå‡½æ•°</h1><p>pollçš„åŠŸèƒ½ä¸selectç±»ä¼¼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;poll.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//timeoutå•ä½ï¼šms</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">poll</span><span class="params">(struct pollfd *fdarray, <span class="keyword">unsigned</span> <span class="keyword">long</span> nfds, <span class="keyword">int</span> timeout)</span></span>;</span><br><span class="line"><span class="comment">//è‹¥æœ‰å°±ç»ªæè¿°ç¬¦åˆ™è¿”å›æ•°ç›®ï¼Œè¶…æ—¶è¿”å›0ï¼Œå‡ºé”™è¿”å›-1</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pollfd</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> fd;</span><br><span class="line">    <span class="keyword">short</span> events;<span class="comment">//è¯¥æè¿°ç¬¦ä¸Šæ„Ÿå…´è¶£çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">short</span> revents;<span class="comment">//è¯¥æè¿°ç¬¦ä¸Šå‘ç”Ÿçš„äº‹ä»¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h1><p>ä¸åŒäºselectå’Œpollï¼Œepollç”±ä¸‰éƒ¨åˆ†ç»„æˆã€‚</p>
<h2 id="å‡½æ•°åŸå‹"><a href="#å‡½æ•°åŸå‹" class="headerlink" title="å‡½æ•°åŸå‹"></a>å‡½æ•°åŸå‹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºepollå¥æŸ„</span></span><br><span class="line"><span class="comment"> * sizeï¼šæœ€å¤§socket fdæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_create</span><span class="params">(<span class="keyword">int</span> size)</span></span>;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¥å‡½æ•°ç”¨äºæ§åˆ¶æŸä¸ªepollæ–‡ä»¶æè¿°ç¬¦ä¸Šçš„äº‹ä»¶ï¼Œå¯ä»¥æ³¨å†Œäº‹ä»¶ï¼Œä¿®æ”¹äº‹ä»¶ï¼Œåˆ é™¤äº‹ä»¶ã€‚</span></span><br><span class="line"><span class="comment"> * epfdï¼šç”± epoll_create ç”Ÿæˆçš„epollä¸“ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼›</span></span><br><span class="line"><span class="comment"> * opï¼šè¦è¿›è¡Œçš„æ“ä½œä¾‹å¦‚æ³¨å†Œäº‹ä»¶ï¼Œå¯èƒ½çš„å–å€¼EPOLL_CTL_ADD æ³¨å†Œã€EPOLL_CTL_MOD ä¿® æ”¹ã€EPOLL_CTL_DEL åˆ é™¤</span></span><br><span class="line"><span class="comment"> * fdï¼šå…³è”çš„æ–‡ä»¶æè¿°ç¬¦ï¼›</span></span><br><span class="line"><span class="comment"> * eventï¼šæŒ‡å‘epoll_eventçš„æŒ‡é’ˆï¼›</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_ctl</span><span class="params">(<span class="keyword">int</span> epfd, <span class="keyword">int</span> op, <span class="keyword">int</span> fd, struct epoll_event *event)</span></span>;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç­‰å¾…äº‹ä»¶è§¦å‘ï¼Œå½“è¶…è¿‡timeoutè¿˜æ²¡æœ‰äº‹ä»¶è§¦å‘æ—¶ï¼Œå°±è¶…æ—¶ã€‚</span></span><br><span class="line"><span class="comment"> * epfd:ç”±epoll_create ç”Ÿæˆçš„epollä¸“ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼›</span></span><br><span class="line"><span class="comment"> * epoll_event:ç”¨äºå›ä¼ ä»£å¤„ç†äº‹ä»¶çš„æ•°ç»„ï¼›</span></span><br><span class="line"><span class="comment"> * maxevents:æ¯æ¬¡èƒ½å¤„ç†çš„äº‹ä»¶æ•°ï¼›</span></span><br><span class="line"><span class="comment"> * timeout:ç­‰å¾…I/Oäº‹ä»¶å‘ç”Ÿçš„è¶…æ—¶å€¼ï¼›-1ç›¸å½“äºé˜»å¡ï¼Œ0ç›¸å½“äºéé˜»å¡ã€‚ä¸€èˆ¬ç”¨-1å³å¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">epoll_wait</span><span class="params">(<span class="keyword">int</span> epfd, struct epoll_event *events,<span class="keyword">int</span> maxevents, <span class="keyword">int</span> timeout)</span></span>;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span>Â <span class="title">epoll_event</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">Â Â <span class="keyword">uint32_t</span>Â events; Â  <span class="comment">/*Â EpollÂ eventsÂ */</span></span><br><span class="line">Â Â <span class="keyword">epoll_data_t</span>Â data;Â Â Â Â <span class="comment">/*Â UserÂ dataÂ variableÂ */</span></span><br><span class="line">&#125;Â __attribute__Â ((__packed__));</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span>Â <span class="keyword">union</span>Â epoll_data</span><br><span class="line">&#123;</span><br><span class="line">Â Â <span class="keyword">void</span>Â *ptr;</span><br><span class="line">Â Â <span class="keyword">int</span>Â fd;</span><br><span class="line">Â Â <span class="keyword">uint32_t</span>Â u32;</span><br><span class="line">Â Â <span class="keyword">uint64_t</span>Â u64;</span><br><span class="line">&#125;Â <span class="keyword">epoll_data_t</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºepoll_wait</p>
<p>ç­‰ä¾æ³¨å†Œåœ¨epfdä¸Šçš„socket fdçš„äº‹ä»¶çš„å‘ç”Ÿï¼Œå¦‚æœå‘ç”Ÿåˆ™å°†å‘ç”Ÿçš„sokct fdå’Œäº‹ä»¶ç±»å‹æ”¾å…¥åˆ°eventsæ•°ç»„ä¸­ã€‚<br>å¹¶ ä¸”å°†æ³¨å†Œåœ¨epfdä¸Šçš„socket fdçš„äº‹ä»¶ç±»å‹ç»™æ¸…ç©ºï¼Œæ‰€ä»¥å¦‚æœä¸‹ä¸€ä¸ªå¾ªç¯ä½ è¿˜è¦å…³æ³¨è¿™ä¸ªsocket fdçš„è¯ï¼Œåˆ™<strong>éœ€è¦ç”¨epoll_ctl(epfd,EPOLL_CTL_MOD,listenfd,&amp;ev)æ¥é‡æ–°è®¾ç½®socket fdçš„äº‹ä»¶ç±»å‹</strong>ã€‚è¿™æ—¶ä¸ç”¨EPOLL_CTL_ADD,å› ä¸ºsocket fdå¹¶æœªæ¸…ç©ºï¼Œåªæ˜¯äº‹ä»¶ç±»å‹æ¸…ç©ºã€‚</p>
</blockquote>
<h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>è°ƒç”¨epoll_createæ—¶ï¼Œå†…æ ¸é™¤äº†å¸®æˆ‘ä»¬åœ¨epollæ–‡ä»¶ç³»ç»Ÿé‡Œå»ºäº†ä¸ªfileç»“ç‚¹ï¼Œåœ¨å†…æ ¸cacheé‡Œå»ºäº†ä¸ªçº¢é»‘æ ‘ç”¨äºå­˜å‚¨ä»¥åepoll_ctlä¼ æ¥çš„socketå¤–ï¼Œè¿˜ä¼šå†å»ºç«‹ä¸€ä¸ªrdlliståŒå‘é“¾è¡¨ï¼Œç”¨äºå­˜å‚¨å‡†å¤‡å°±ç»ªçš„äº‹ä»¶ï¼Œ<strong>å½“epoll_waitè°ƒç”¨æ—¶ï¼Œä»…ä»…è§‚å¯Ÿè¿™ä¸ªrdlliståŒå‘é“¾è¡¨é‡Œæœ‰æ²¡æœ‰æ•°æ®å³å¯</strong>ã€‚æœ‰æ•°æ®å°±è¿”å›ï¼Œæ²¡æœ‰æ•°æ®å°±sleepï¼Œç­‰åˆ°timeoutæ—¶é—´åˆ°åå³ä½¿é“¾è¡¨æ²¡æ•°æ®ä¹Ÿè¿”å›ã€‚æ‰€ä»¥ï¼Œepoll_waitéå¸¸é«˜æ•ˆã€‚</p>
<p>æ‰€æœ‰æ·»åŠ åˆ°epollä¸­çš„äº‹ä»¶éƒ½ä¼šä¸è®¾å¤‡(å¦‚ç½‘å¡)é©±åŠ¨ç¨‹åº<strong>å»ºç«‹å›è°ƒå…³ç³»</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ç›¸åº”äº‹ä»¶çš„å‘ç”Ÿæ—¶ä¼šè°ƒç”¨è¿™é‡Œçš„å›è°ƒæ–¹æ³•ã€‚è¿™ä¸ªå›è°ƒæ–¹æ³•åœ¨å†…æ ¸ä¸­å«åš<strong>ep_poll_callback</strong>ï¼Œå®ƒä¼šæŠŠè¿™æ ·çš„äº‹ä»¶æ”¾åˆ°ä¸Šé¢çš„rdlliståŒå‘é“¾è¡¨ä¸­ã€‚</p>
<h2 id="è§¦å‘æ–¹å¼"><a href="#è§¦å‘æ–¹å¼" class="headerlink" title="è§¦å‘æ–¹å¼"></a>è§¦å‘æ–¹å¼</h2><p>LTï¼ˆæ°´å¹³è§¦å‘ï¼‰æ¨¡å¼ä¸‹ï¼Œåªè¦è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦è¿˜æœ‰æ•°æ®å¯è¯»ï¼Œæ¯æ¬¡ epoll_waitéƒ½ä¼šè¿”å›å®ƒçš„äº‹ä»¶ï¼Œæé†’ç”¨æˆ·ç¨‹åºå»æ“ä½œï¼›</p>
<p>ETï¼ˆè¾¹ç¼˜è§¦å‘ï¼‰æ¨¡å¼ä¸‹ï¼Œåœ¨å®ƒæ£€æµ‹åˆ°æœ‰ I/O äº‹ä»¶æ—¶ï¼Œé€šè¿‡ epoll_wait è°ƒç”¨ä¼šå¾—åˆ°æœ‰äº‹ä»¶é€šçŸ¥çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¢«é€šçŸ¥çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚å¯è¯»ï¼Œåˆ™å¿…é¡»å°†è¯¥æ–‡ä»¶æè¿°ç¬¦ä¸€ç›´è¯»åˆ°ç©ºï¼Œè®© errno è¿”å› EAGAIN ä¸ºæ­¢ï¼Œå¦åˆ™ä¸‹æ¬¡çš„ epoll_wait ä¸ä¼šè¿”å›ä½™ä¸‹çš„æ•°æ®ï¼Œä¼šä¸¢æ‰äº‹ä»¶ã€‚å¦‚æœETæ¨¡å¼ä¸æ˜¯éé˜»å¡çš„ï¼Œé‚£è¿™ä¸ªä¸€ç›´è¯»æˆ–ä¸€ç›´å†™åŠ¿å¿…ä¼šåœ¨æœ€åä¸€æ¬¡é˜»å¡ã€‚</p>
<p>ETçš„ä¼˜ç‚¹ï¼š</p>
<p>å¦‚æœé‡‡ç”¨EPOLLLTæ¨¡å¼çš„è¯ï¼Œç³»ç»Ÿä¸­ä¸€æ—¦æœ‰å¤§é‡ä½ ä¸éœ€è¦è¯»å†™çš„å°±ç»ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå®ƒä»¬æ¯æ¬¡è°ƒç”¨epoll_waitéƒ½ä¼šè¿”å›ï¼Œè¿™æ ·ä¼šå¤§å¤§é™ä½å¤„ç†ç¨‹åºæ£€ç´¢è‡ªå·±å…³å¿ƒçš„å°±ç»ªæ–‡ä»¶æè¿°ç¬¦çš„æ•ˆç‡.ã€‚è€Œé‡‡ç”¨EPOLLETè¿™ç§è¾¹ç¼˜è§¦å‘æ¨¡å¼çš„è¯ï¼Œå½“è¢«ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦ä¸Šæœ‰å¯è¯»å†™äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œepoll_wait()ä¼šé€šçŸ¥å¤„ç†ç¨‹åºå»è¯»å†™ã€‚å¦‚æœè¿™æ¬¡æ²¡æœ‰æŠŠæ•°æ®å…¨éƒ¨è¯»å†™å®Œ(å¦‚è¯»å†™ç¼“å†²åŒºå¤ªå°)ï¼Œé‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨epoll_wait()æ—¶ï¼Œå®ƒä¸ä¼šé€šçŸ¥ä½ ï¼Œä¹Ÿå°±æ˜¯å®ƒåªä¼šé€šçŸ¥ä½ ä¸€æ¬¡ï¼Œç›´åˆ°è¯¥æ–‡ä»¶æè¿°ç¬¦ä¸Šå‡ºç°ç¬¬äºŒæ¬¡å¯è¯»å†™äº‹ä»¶æ‰ä¼šé€šçŸ¥ä½ ï¼ï¼ï¼è¿™ç§æ¨¡å¼æ¯”æ°´å¹³è§¦å‘æ•ˆç‡é«˜ï¼Œç³»ç»Ÿä¸ä¼šå……æ–¥å¤§é‡ä½ ä¸å…³å¿ƒçš„å°±ç»ªæ–‡ä»¶æè¿°ç¬¦ã€‚</p>
<h1 id="selectã€pollã€epollå¯¹æ¯”"><a href="#selectã€pollã€epollå¯¹æ¯”" class="headerlink" title="selectã€pollã€epollå¯¹æ¯”"></a>selectã€pollã€epollå¯¹æ¯”</h1><p>ä¸‰ç§éƒ½æ˜¯åŒæ­¥I/O</p>
<p>(1)select==&gt;æ—¶é—´å¤æ‚åº¦O(n)</p>
<p>å®ƒä»…ä»…çŸ¥é“äº†ï¼Œæœ‰I/Oäº‹ä»¶å‘ç”Ÿäº†ï¼Œå´å¹¶ä¸çŸ¥é“æ˜¯å“ªé‚£å‡ ä¸ªæµï¼ˆå¯èƒ½æœ‰ä¸€ä¸ªï¼Œå¤šä¸ªï¼Œç”šè‡³å…¨éƒ¨ï¼‰ï¼Œæˆ‘ä»¬åªèƒ½æ— å·®åˆ«è½®è¯¢æ‰€æœ‰æµï¼Œæ‰¾å‡ºèƒ½è¯»å‡ºæ•°æ®ï¼Œæˆ–è€…å†™å…¥æ•°æ®çš„æµï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥<strong>selectå…·æœ‰O(n)çš„æ— å·®åˆ«è½®è¯¢å¤æ‚åº¦</strong>ï¼ŒåŒæ—¶å¤„ç†çš„æµè¶Šå¤šï¼Œæ— å·®åˆ«è½®è¯¢æ—¶é—´å°±è¶Šé•¿ã€‚</p>
<p>(2)poll==&gt;æ—¶é—´å¤æ‚åº¦O(n)</p>
<p>pollæœ¬è´¨ä¸Šå’Œselectæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒå°†ç”¨æˆ·ä¼ å…¥çš„æ•°ç»„æ‹·è´åˆ°å†…æ ¸ç©ºé—´ï¼Œç„¶åæŸ¥è¯¢æ¯ä¸ªfdå¯¹åº”çš„è®¾å¤‡çŠ¶æ€ï¼Œ <strong>ä½†æ˜¯å®ƒæ²¡æœ‰æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶</strong>ï¼ŒåŸå› æ˜¯å®ƒæ˜¯åŸºäºé“¾è¡¨æ¥å­˜å‚¨çš„.</p>
<p>(3)epoll==&gt;æ—¶é—´å¤æ‚åº¦O(1)</p>
<p><strong>epollå¯ä»¥ç†è§£ä¸ºevent poll</strong>ï¼Œä¸åŒäºå¿™è½®è¯¢å’Œæ— å·®åˆ«è½®è¯¢ï¼Œepollä¼šæŠŠå“ªä¸ªæµå‘ç”Ÿäº†æ€æ ·çš„I/Oäº‹ä»¶é€šçŸ¥æˆ‘ä»¬ã€‚æ‰€ä»¥æˆ‘ä»¬è¯´epollå®é™…ä¸Šæ˜¯<strong>äº‹ä»¶é©±åŠ¨ï¼ˆæ¯ä¸ªäº‹ä»¶å…³è”ä¸Šfdï¼‰</strong>çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯¹è¿™äº›æµçš„æ“ä½œéƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚<strong>ï¼ˆå¤æ‚åº¦é™ä½åˆ°äº†O(1)ï¼‰</strong></p>
<h2 id="selectçš„ç¼ºç‚¹"><a href="#selectçš„ç¼ºç‚¹" class="headerlink" title="selectçš„ç¼ºç‚¹"></a>selectçš„ç¼ºç‚¹</h2><p>ï¼ˆ1ï¼‰æ¯æ¬¡è°ƒç”¨selectï¼Œéƒ½éœ€è¦æŠŠfdé›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§</p>
<p>ï¼ˆ2ï¼‰åŒæ—¶æ¯æ¬¡è°ƒç”¨selectéƒ½éœ€è¦åœ¨å†…æ ¸éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰fdï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¹Ÿå¾ˆå¤§</p>
<p>ï¼ˆ3ï¼‰selectæ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°äº†ï¼Œé»˜è®¤æ˜¯1024</p>
<h2 id="pollçš„ç¼ºç‚¹"><a href="#pollçš„ç¼ºç‚¹" class="headerlink" title="pollçš„ç¼ºç‚¹"></a>pollçš„ç¼ºç‚¹</h2><p>é™¤äº†æ²¡æœ‰æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶ï¼Œå…¶ä»–ä¸selectç›¸åŒã€‚</p>
<h2 id="epoll-1"><a href="#epoll-1" class="headerlink" title="epoll"></a>epoll</h2><p>â€‹        epollæ—¢ç„¶æ˜¯å¯¹selectå’Œpollçš„æ”¹è¿›ï¼Œå°±åº”è¯¥èƒ½é¿å…ä¸Šè¿°çš„ä¸‰ä¸ªç¼ºç‚¹ã€‚é‚£epolléƒ½æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹epollå’Œselectå’Œpollçš„è°ƒç”¨æ¥å£ä¸Šçš„ä¸åŒï¼Œselectå’Œpolléƒ½åªæä¾›äº†ä¸€ä¸ªå‡½æ•°â€”â€”selectæˆ–è€…pollå‡½æ•°ã€‚è€Œepollæä¾›äº†ä¸‰ä¸ªå‡½æ•°ï¼Œepoll_create,epoll_ctlå’Œepoll_waitï¼Œepoll_createæ˜¯åˆ›å»ºä¸€ä¸ªepollå¥æŸ„ï¼›epoll_ctlæ˜¯æ³¨å†Œè¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ï¼›epoll_waitåˆ™æ˜¯ç­‰å¾…äº‹ä»¶çš„äº§ç”Ÿã€‚</p>
<p>ã€€ã€€å¯¹äºç¬¬ä¸€ä¸ªç¼ºç‚¹ï¼Œepollçš„è§£å†³æ–¹æ¡ˆåœ¨epoll_ctlå‡½æ•°ä¸­ã€‚æ¯æ¬¡æ³¨å†Œæ–°çš„äº‹ä»¶åˆ°epollå¥æŸ„ä¸­æ—¶ï¼ˆåœ¨epoll_ctlä¸­æŒ‡å®šEPOLL_CTL_ADDï¼‰ï¼Œä¼šæŠŠæ‰€æœ‰çš„fdæ‹·è´è¿›å†…æ ¸ï¼Œè€Œä¸æ˜¯åœ¨epoll_waitçš„æ—¶å€™é‡å¤æ‹·è´ã€‚epollä¿è¯äº†æ¯ä¸ªfdåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­åªä¼šæ‹·è´ä¸€æ¬¡ã€‚</p>
<p>ã€€ã€€å¯¹äºç¬¬äºŒä¸ªç¼ºç‚¹ï¼Œepollçš„è§£å†³æ–¹æ¡ˆä¸åƒselectæˆ–pollä¸€æ ·æ¯æ¬¡éƒ½æŠŠcurrentè½®æµåŠ å…¥fdå¯¹åº”çš„è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œè€Œåªåœ¨epoll_ctlæ—¶æŠŠcurrentæŒ‚ä¸€éï¼ˆè¿™ä¸€éå¿…ä¸å¯å°‘ï¼‰å¹¶ä¸ºæ¯ä¸ªfdæŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“è®¾å¤‡å°±ç»ªï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„ç­‰å¾…è€…æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šæŠŠå°±ç»ªçš„fdåŠ å…¥ä¸€ä¸ªå°±ç»ªé“¾è¡¨ï¼‰ã€‚epoll_waitçš„å·¥ä½œå®é™…ä¸Šå°±æ˜¯åœ¨è¿™ä¸ªå°±ç»ªé“¾è¡¨ä¸­æŸ¥çœ‹æœ‰æ²¡æœ‰å°±ç»ªçš„fdï¼ˆåˆ©ç”¨schedule_timeout()å®ç°ç¡ä¸€ä¼šï¼Œåˆ¤æ–­ä¸€ä¼šçš„æ•ˆæœï¼Œå’Œselectå®ç°ä¸­çš„ç¬¬7æ­¥æ˜¯ç±»ä¼¼çš„ï¼‰ã€‚</p>
<p>ã€€ã€€å¯¹äºç¬¬ä¸‰ä¸ªç¼ºç‚¹ï¼Œepollæ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œå®ƒæ‰€æ”¯æŒçš„FDä¸Šé™æ˜¯æœ€å¤§å¯ä»¥æ‰“å¼€æ–‡ä»¶çš„æ•°ç›®ï¼Œè¿™ä¸ªæ•°å­—ä¸€èˆ¬è¿œå¤§äº2048,ä¸¾ä¸ªä¾‹å­,åœ¨1GBå†…å­˜çš„æœºå™¨ä¸Šå¤§çº¦æ˜¯10ä¸‡å·¦å³ï¼Œå…·ä½“æ•°ç›®å¯ä»¥cat /proc/sys/fs/file-maxå¯Ÿçœ‹,ä¸€èˆ¬æ¥è¯´è¿™ä¸ªæ•°ç›®å’Œç³»ç»Ÿå†…å­˜å…³ç³»å¾ˆå¤§ã€‚</p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://blog.csdn.net/daaikuaichuan/article/details/83862311" target="_blank" rel="noopener">https://blog.csdn.net/daaikuaichuan/article/details/83862311</a></p>
<p><a href="https://www.cnblogs.com/aspirant/p/9166944.html" target="_blank" rel="noopener">https://www.cnblogs.com/aspirant/p/9166944.html</a></p>
<p>ã€ŠUNIXç½‘ç»œç¼–ç¨‹ã€‹I/Oå¤ç”¨ï¼šselectå’Œpollå‡½æ•°</p>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/unix/" rel="tag"><i class="fa fa-tag"></i> unix</a>
            
              <a href="/tags/ç½‘ç»œç¼–ç¨‹/" rel="tag"><i class="fa fa-tag"></i> ç½‘ç»œç¼–ç¨‹</a>
            
              <a href="/tags/IOå¤ç”¨/" rel="tag"><i class="fa fa-tag"></i> IOå¤ç”¨</a>
            
              <a href="/tags/select/" rel="tag"><i class="fa fa-tag"></i> select</a>
            
              <a href="/tags/poll/" rel="tag"><i class="fa fa-tag"></i> poll</a>
            
              <a href="/tags/epoll/" rel="tag"><i class="fa fa-tag"></i> epoll</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/10/10/Leetcodeé¢˜è§£-Q233-æ•°å­—1çš„ä¸ªæ•°/" rel="next" title="Leetcodeé¢˜è§£-Q233-æ•°å­—1çš„ä¸ªæ•°">
                  <i class="fa fa-chevron-left"></i> Leetcodeé¢˜è§£-Q233-æ•°å­—1çš„ä¸ªæ•°
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/10/14/Leetcodeé¢˜è§£-Q5224-æ·éª°å­æ¨¡æ‹Ÿ/" rel="prev" title="Leetcodeé¢˜è§£-Q5224-æ·éª°å­æ¨¡æ‹Ÿ">
                  Leetcodeé¢˜è§£-Q5224-æ·éª°å­æ¨¡æ‹Ÿ <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#IOæ¨¡å‹"><span class="nav-number">1.</span> <span class="nav-text">IOæ¨¡å‹</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#selectå‡½æ•°"><span class="nav-number">2.</span> <span class="nav-text">selectå‡½æ•°</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#pollå‡½æ•°"><span class="nav-number">3.</span> <span class="nav-text">pollå‡½æ•°</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#epoll"><span class="nav-number">4.</span> <span class="nav-text">epoll</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å‡½æ•°åŸå‹"><span class="nav-number">4.1.</span> <span class="nav-text">å‡½æ•°åŸå‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŸç†"><span class="nav-number">4.2.</span> <span class="nav-text">åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è§¦å‘æ–¹å¼"><span class="nav-number">4.3.</span> <span class="nav-text">è§¦å‘æ–¹å¼</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#selectã€pollã€epollå¯¹æ¯”"><span class="nav-number">5.</span> <span class="nav-text">selectã€pollã€epollå¯¹æ¯”</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#selectçš„ç¼ºç‚¹"><span class="nav-number">5.1.</span> <span class="nav-text">selectçš„ç¼ºç‚¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pollçš„ç¼ºç‚¹"><span class="nav-number">5.2.</span> <span class="nav-text">pollçš„ç¼ºç‚¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#epoll-1"><span class="nav-number">5.3.</span> <span class="nav-text">epoll</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒ"><span class="nav-number">6.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/uploads/avatar.jpg"
      alt="ChocoCLv">
  <p class="site-author-name" itemprop="name">ChocoCLv</p>
  <div class="site-description" itemprop="description">å…”å­ğŸ‡å’Œçªè¾¹è‰ğŸŒ±</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/ChocoCLv" title="GitHub &rarr; https://github.com/ChocoCLv" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:choco_cl@163.com" title="E-Mail &rarr; mailto:choco_cl@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://yihuan18.github.io" title="https://yihuan18.github.io" rel="noopener" target="_blank">ğŸ‡</a>
        </li>
      
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ChocoCLv</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.4.0</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/muse.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>



  








  <script src="/js/local-search.js?v=7.4.0"></script>














  

  

  

  


<script>
NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: true,
    notify: true,
    appId: 'GwHoR7bLobe4hKkOCAWxciu9-gzGzoHsz',
    appKey: 'Jh8cJAls7JYaw9FeidM0gtVQ',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: 'zh-cn' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script>

</body>
</html>
